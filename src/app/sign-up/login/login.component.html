<!--Custom Modal-->
<div class="mobile-verify-modal" *ngIf="progressModal">
  <div class="custom-modal-backdrop"></div>
  <div class="custom-modal-wrapper">
    <div class="custom-modal--icon">
      <div class="loader-outer">
        <div class="loader"></div>
        <img src="assets/images/owl-icon-dark.svg" id="custModalImg1" />
      </div>
    </div>
  </div>
</div>
<div class="container-fluid max-width--1024 plr20 full-height">
  <div class="back-btn hidden-lg" (click)="goBack()"></div>
  <!-- Old login page for Finlit -->
  <div *ngIf='finlitEnabled; else loginWithSingpass' class="content">
    <div class="row">
      <div class="col-lg-7 col-md-6">
        <div class="signup-wrapper">
          <h2 class="signup-wrapper__title order1 sm-order2 ml10 mb20" #welcomeTitle id="login_welcometxt_lbl">
            {{ 'LOGIN.WELCOME_LBL' | translate}}</h2>
          <img class="signup-wrapper__header-icon order3 sm-order1" src="assets/images/createAccount-icon.svg" />
        </div>
      </div>
      <div class="col-lg-5 col-md-6">
        <form id="loginForm" name="loginForm" [formGroup]="loginForm" (keyup.enter)="doLogin(loginForm)">
          <div class="flex-row mb15">
            <div class="flex-col-12 stretch">
              <div class="form-group-floating-label"
                [ngClass]="{'inline-error':getInlineErrorStatus(loginForm.controls.loginUsername)}">
                <input type="text" appInputFocus id="login_username_txt" class="form-control" #loginUsername
                formControlName="loginUsername" (paste)="onPaste($event)" (keyup)="onKeyupEvent($event)" required>
                <label class="form-control-placeholder" for="login_username_txt"
                  id="login_username_lbl">{{ 'LOGIN.FORM.USERNAME' | translate}}</label>
              </div>
            </div>
          </div>
          <div class="flex-row mb20">
            <div class="flex-col-12 stretch">
              <div class="form-group-floating-label"
                [ngClass]="{'inline-error':getInlineErrorStatus(loginForm.controls.loginPassword)}"
                (capsLock)="capsOn=$event">
                <input type="password" appInputFocus #loginPassword id="login_password_txt" class="form-control"
                  formControlName="loginPassword" required (focus)="onFocus()" (blur)="onBlur()">
                <label class="form-control-placeholder" for="login_password_txt"
                  id="login_password_lbl">{{ 'LOGIN.FORM.PASSWORD' | translate}}</label>
                <span id="login_showpassword_button"
                  [ngClass]="(loginPassword.type === 'text') ? 'show-password' : 'hide-password'"
                  (click)="showHidePassword(loginPassword)"></span>
              </div>
            </div>
            <div class="alert-msg" *ngIf="capsOn && capslockFocus">
              <div>
                <span class="alert-icon"><img src="assets/images/alert.svg" /></span>
                <span class="err-msg">{{'COMMON.CAPS_LOCK_IS_ON' | translate}}</span>
              </div>
            </div>
          </div>
          <div class="flex-row mb20" *ngIf='finlitEnabled'>
            <div class="flex-col-12 stretch">
              <div class="form-group-floating-label"
                [ngClass]="{'inline-error':getInlineErrorStatus(loginForm.controls.accessCode)}">
                <input type="text" appInputFocus id="login_access_code_txt" class="form-control" #accessCode
                  formControlName="accessCode" required maxLength="10">
                <label class="form-control-placeholder" for="login_access_code_txt"
                  id="login_access_code_lbl">{{ 'LOGIN.FORM.ACCESS_CODE' | translate}}</label>
              </div>
            </div>
          </div>
          <div class="flex-row mb10" *ngIf="showCaptcha">
            <span class="mb10">{{ 'COMMON.CAPTCHA_TITLE' | translate}}</span>
            <div class="flex-col-6 stretch">
              <div class="form-group-captcha-wrapper">
                <img [src]="(captchaSrc | secure | async) || ''" class="captcha-img" />
              </div>
            </div>
            <div class="flex-col-6 stretch">
              <div class="form-group-floating-label">
                <input type="text" id="crtAccInpt6" class="form-control" #captchaValue formControlName="captchaValue"
                  required>
                <label class="form-control-placeholder" for="lastName">{{ 'COMMON.CAPTCHA' | translate}}</label>
              </div>
              <div>
                <span (click)="refreshCaptcha()" class="link-white">{{ 'COMMON.TRY_ANOTHER_TEXT' | translate}} <i
                    class="fa fa-refresh" style="color: white; margin-left: 10px;"></i></span>
              </div>
            </div>
          </div>
          <!-- FORGOT -->
          <div class="forgot-link" *ngIf="!hideForgotPassword">
            <a id="login_forgotpwd_link"
              [routerLink]="'/accounts/forgot-password'">{{ 'LOGIN.FORGOT_PASSWORD' | translate}}</a>
          </div>
          <div class="start-link"><a id="login_signup_link" [routerLink]="finlitEnabled ? '/accounts/finlit/sign-up':'/accounts/sign-up'  ">
            {{ 'LOGIN.GET_STARTED' | translate}}</a></div>
          <button id="login_submit_btn" (click)="doLogin(loginForm)" type="button"
            class="btn btn__footer--fixed btn-primary width100 ">{{
            'COMMON.LOGIN' | translate }}</button>
        </form>
        <div class="mt60"  innerHTML="{{'LOGIN.CLIENT_ASSISTANCE' | translate}}"></div>
      </div>
    </div>
  </div>
  <!-- NEW LOGIN PAGE WITH SINGPASS -->
 <ng-template #loginWithSingpass>
  <div class="content">
    <div class="sp-pw-container">
      <div class="pw-login-container">
        <div class="signup-wrapper">
          <div class="password-qr-toggle">
            <div class="toggle-container">
              <div [ngClass]="{'white-txt': showPasswordLogin}" class="toggle-btn" (click)="toggleSingpass('password')">{{
                'LOGIN.PASSWORD_LOGIN' | translate}}</div>
              <div [hidden]="showSingpassLogin" class=" underline"></div>
            </div>
            <div class="toggle-container">
              <div [ngClass]="{'white-txt': showSingpassLogin}" class="toggle-btn" (click)="toggleSingpass('singpass')">
                <img [hidden]="showSingpassLogin" src="assets/images/singpass/icon-scan-qr.svg">
                <img [hidden]="showPasswordLogin" src="assets/images/singpass/icon-scan-qr-white.svg">
                <div>{{ 'LOGIN.SINGPASS_MOBILE' | translate}}</div>
              </div>
              <div [hidden]="showPasswordLogin" class="underline"></div>
            </div>
          </div>
          <div class="login-title" #welcomeTitle id="login_welcometxt_lbl">
            {{ 'LOGIN.LOGIN_TO_MO' | translate}}</div>
          <div class="img-container" [hidden]="showSingpassLogin">
            <img class="login-header-icon" src="assets/images/createAccount-icon.svg" />
          </div>
        </div>
        <form [hidden]="showSingpassLogin" id="loginForm" name="loginForm" [formGroup]="loginForm"
          (keyup.enter)="doLogin(loginForm)">
          <div class="flex-row mb10">
            <div class="flex-col-12 stretch">
              <div class="form-group-floating-label"
                [ngClass]="{'inline-error':getInlineErrorStatus(loginForm.controls.loginUsername)}">
                <input type="text" appInputFocus id="login_username_txt" class="form-control" #loginUsername
                  formControlName="loginUsername" (paste)="onPaste($event)" (keyup)="onKeyupEvent($event)" required>
                <label class="form-control-placeholder" for="login_username_txt" id="login_username_lbl">{{
                  'LOGIN.FORM.USERNAME' | translate}}</label>
              </div>
            </div>
          </div>
          <div class="flex-row mb15">
            <div class="flex-col-12 stretch">
              <div class="form-group-floating-label"
                [ngClass]="{'inline-error':getInlineErrorStatus(loginForm.controls.loginPassword)}"
                (capsLock)="capsOn=$event">
                <input type="password" appInputFocus #loginPassword id="login_password_txt" class="form-control"
                  formControlName="loginPassword" required (focus)="onFocus()" (blur)="onBlur()">
                <label class="form-control-placeholder" for="login_password_txt" id="login_password_lbl">{{
                  'LOGIN.FORM.PASSWORD' | translate}}</label>
                <span id="login_showpassword_button"
                  [ngClass]="(loginPassword.type === 'text') ? 'show-password' : 'hide-password'"
                  (click)="showHidePassword(loginPassword)"></span>
              </div>
            </div>
            <div class="alert-msg" *ngIf="capsOn && capslockFocus">
              <div>
                <span class="alert-icon"><img src="assets/images/alert.svg" /></span>
                <span class="err-msg">{{'COMMON.CAPS_LOCK_IS_ON' | translate}}</span>
              </div>
            </div>
          </div>
          <div class="flex-row mb30" *ngIf="showCaptcha">
            <span class="mb10">{{ 'COMMON.CAPTCHA_TITLE' | translate}}</span>
            <img [src]="(captchaSrc | secure | async) || ''" class="captcha-img" />
            <div class="flex-col-6 stretch">
              <div class="form-group-floating-label">
                <input type="text" id="crtAccInpt6" class="form-control" #captchaValue formControlName="captchaValue"
                  required>
                <label class="form-control-placeholder" for="lastName">{{ 'COMMON.CAPTCHA' | translate}}</label>
              </div>
              <div>
                <span (click)="refreshCaptcha()" class="link-white">{{ 'COMMON.TRY_ANOTHER_TEXT' | translate}} <i
                    class="fa fa-refresh ml10"></i></span>
              </div>
            </div>
          </div>
          <button id="login_submit_btn" (click)="doLogin(loginForm)" type="button" class="btn btn-primary width100 ">{{
            'COMMON.LOGIN' | translate }}</button>
          <!-- FORGOT -->
          <div class="forgot-link mt30" *ngIf="!hideForgotPassword">
            <a id="login_forgotpwd_link" [routerLink]="'/accounts/forgot-password'">{{ 'LOGIN.FORGOT_PASSWORD' |
              translate}}</a>
          </div>
          <div class="start-link mt10"><a id="login_signup_link"
              [routerLink]="finlitEnabled ? '/accounts/finlit/sign-up':'/accounts/sign-up'  ">{{'LOGIN.GET_STARTED' |
              translate}}</a></div>
        </form>
      </div>
      <div class="separator-container">
        <img src="assets/images/singpass/asset-separator.svg" />
      </div>
      <div class="singpass-container" [ngClass]="{'show-element': showSingpassLogin}">
        <div class="title-container">
          <img src="assets/images/singpass/icon-new.svg" />
          <div>{{ 'LOGIN.LOGIN_USE_SINGPASS' | translate}}<a (click)="openModal($event)">{{ 'LOGIN.HOW_TO_ACTIVATE' |
              translate}}</a></div>
        </div>
        <div id="qr_wrapper"></div>
        <div class="footer-container">{{ 'LOGIN.DONT_HAVE_SINGPASS' | translate}}<a href="https://app.singpass.gov.sg/"
            target="_blank">{{ 'LOGIN.DOWNLOAD_NOW' | translate}}</a></div>
      </div>
    </div>
    <div class="client-assist mt30" innerHTML="{{'LOGIN.CLIENT_ASSISTANCE' | translate}}"></div>
  </div>
  </ng-template>
</div>
