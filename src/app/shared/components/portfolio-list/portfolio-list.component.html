<!-- Widget Content-->
<div class="multiple-portfolio-container" *ngIf="totalPortfoliosLength > 0; else noFilteredPortfolios">
    <div class="container-fluid max-width--1024">
        <div class="multiple-portfolio-block">
            <div class="multiple-portfolio-header">
                {{'YOUR_INVESTMENT.TOTAL_OF' | translate}} {{totalPortfoliosLength}}
                <div (click)="addPortfolio()" class="add_portfolio_label cursor_pointer" id="investment_overview_total_of">
                    <img class="pr5" src="assets/images/investment-account/plus-white.svg">
                    <span>{{'YOUR_INVESTMENT.ADD_PORTFOLIO' | translate}}</span>
                </div>
            </div>
            <div class="multiple-portfolio-content">

                
                <div class="multiple-portfolio-type" *ngIf="filteredAwaitingList?.length > 0">
                    <div class="multiple-portfolio-type-title awaiting-list">{{'YOUR_INVESTMENT.AWAITING_TO_JOIN' | translate}}</div>
                    <div class="portfolio-list" *ngFor="let portfolio of filteredAwaitingList; let i = index;">
                        <div *ngIf="(i <= 4) || showAllForInvested" class="portfolio">
                            <div class="portfolio-icon" [ngClass]="setBorderClass(portfolio)"><img [src]="getImg(portfolio?.riskProfileId, portfolio?.portfolioCategory)" /></div>
                            <div class="portfolio-details">
                                <div class="portfolio-name">
                                    <span class="portfolio-lbl flex-col-11">{{portfolio?.portfolioName}}</span>
                                    <span *ngIf="portfolio?.fundingTypeValue == 'SRS'" class="portfolio-fund-type">
                                  {{'YOUR_INVESTMENT.SRS' | translate}}
                                </span>
                                </div>
                                <div class="ja-logo" *ngIf="portfolio?.entitlements?.jointAccount"><span class="ja-icon"><img src="assets/images/investment-account/ja-icon.svg" /></span><span>{{'YOUR_INVESTMENT.JOINT_ACCOUNT' | translate}}</span></div>
                                <div class="ja-investment mt10">Equity</div>
                                <div class="ja-investment">{{'YOUR_INVESTMENT.ONE_TIME_AMOUNT' | translate}} {{ (portfolio.initialInvestment ? portfolio.initialInvestment : 0) |
                                    currency:'USD':'symbol-narrow':'1.0-2'}} </div>
                                <div class="ja-investment">{{'YOUR_INVESTMENT.MONTHLY_AMOUNT' | translate}} {{ (portfolio.monthlyInvestment ? portfolio.monthlyInvestment : 0) |
                                    currency:'USD':'symbol-narrow':'1.0-2'}}</div>
                                <div class="row">
                                    <div class='col-md-6 awaiting-period mt10'>{{ portfolio.awaitingPeriod }} {{'YOUR_INVESTMENT.PRIMARY_AWAITING_PERIOD' | translate}}</div>
                                    <div class='col-md-6 ja-btn-group'>
                                        <button class="send-reminder-btn cursorPointer">{{'YOUR_INVESTMENT.SEND_REMINDER' | translate}}</button>
                                        <button class="withdraw-btn cursorPointer ml10" (click)="withDrawModal(portfolio.portfolioName)">{{'YOUR_INVESTMENT.WITHDRAW' | translate}}</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="list-btn" *ngIf="filteredInvestedList.length > 5">
                        <span *ngIf="!showAllForInvested" (click)="showHideToggle('showAllForInvested')">{{'YOUR_INVESTMENT.LIST_ALL' | translate}} ({{ filteredInvestedList.length - 5}})<img src="assets/images/investment-account/list-down.svg" /></span>
                        <span *ngIf="showAllForInvested" (click)="showHideToggle('showAllForInvested')">{{'YOUR_INVESTMENT.SHOW_LESS' | translate}}<img class="show-less" src="assets/images/investment-account/list-down.svg" /></span>
                    </div>
                </div>

                <div class="multiple-portfolio-type" *ngIf="filteredNotInvestedList?.length > 0">
                    <div class="multiple-portfolio-type-title">{{'YOUR_INVESTMENT.NOT_YET_INVESTED' | translate}}</div>
                    <div class="portfolio-list" *ngFor="let portfolio of filteredNotInvestedList; let i = index;">
                        <div (click)="detail(portfolio)" class="portfolio" *ngIf="(i <= 4) || showAllForNotInvested">
                            <div class="portfolio-icon" [ngClass]="setBorderClass(portfolio)"><img [src]="getImg(portfolio?.riskProfileId, portfolio?.portfolioCategory)" /></div>
                            <div class="portfolio-details">
                                <div class="portfolio-name">
                                    <span class="portfolio-lbl flex-col-11">{{portfolio?.portfolioName}}</span>
                                    <span class="portfolio-fund-type" *ngIf="portfolio?.fundingTypeValue == 'SRS'">
                                  {{'YOUR_INVESTMENT.SRS' | translate}}
                                </span>
                                </div>
                                <div class="ref-code">{{'YOUR_INVESTMENT.REF_LABEL' | translate}} {{portfolio.refNo}}</div>
                                <div class="ja-logo" *ngIf="portfolio?.entitlements?.jointAccount"><span class="ja-icon"><img src="assets/images/investment-account/ja-icon.svg" /></span><span>{{'YOUR_INVESTMENT.JOINT_ACCOUNT' | translate}}</span></div>
                                <div class="portfolio-value">
                                    <span *ngIf="!portfolio?.portfolioValue">$0</span>
                                    <span *ngIf="portfolio?.portfolioValue">{{portfolio?.portfolioValue | formatCurrency}}</span>
                                    <span *ngIf="portfolio?.buyRequestCount" class="buy-request cursorPointer" (click)="gotoBuyRequest()">
                                     {{portfolio?.buyRequestCount}}
                                    <span *ngIf="portfolio?.buyRequestCount == 1"> {{'YOUR_INVESTMENT.BUY_REQUEST' | translate}}</span>
                                    <span *ngIf="portfolio?.buyRequestCount > 1"> {{'YOUR_INVESTMENT.BUY_REQUESTS' | translate}}</span>
                                    </span>
                                </div>
                                <div class="portfolio-btn">
                                    <span (click)="gotoTopUp(portfolio)" *ngIf="!portfolio?.buyRequestCount" class="top-up-btn cursorPointer">{{'YOUR_INVESTMENT.TOP_UP' | translate}}</span>
                                    <span *ngIf="!portfolio?.cashAccountBalance  && portfolio?.fundingTypeValue !== 'SRS'" class="cash-account-value">{{'YOUR_INVESTMENT.CA_LABEL' | translate}} $0</span>
                                    <span *ngIf="portfolio?.cashAccountBalance  && portfolio?.fundingTypeValue !== 'SRS'" class="cash-account-value">{{'YOUR_INVESTMENT.CA_LABEL' | translate}} {{portfolio?.cashAccountBalance | formatCurrency}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="list-btn" *ngIf="filteredNotInvestedList.length > 5">
                        <span *ngIf="!showAllForNotInvested" (click)="showHideToggle('showAllForNotInvested')">{{'YOUR_INVESTMENT.LIST_ALL' | translate}} ({{ filteredNotInvestedList.length - 5 }})<img src="assets/images/investment-account/list-down.svg" /></span>
                        <span *ngIf="showAllForNotInvested" (click)="showHideToggle('showAllForNotInvested')">{{'YOUR_INVESTMENT.SHOW_LESS' | translate}} <img class="show-less" src="assets/images/investment-account/list-down.svg" /></span>
                    </div>
                </div>
                <div class="multiple-portfolio-type" *ngIf="filteredInvestedList?.length > 0">
                    <div class="multiple-portfolio-type-title">{{'YOUR_INVESTMENT.INVESTED' | translate}}</div>
                    <div (click)="detail(portfolio)" class="portfolio-list invested" *ngFor="let portfolio of filteredInvestedList; let i = index;">
                        <div *ngIf="(i <= 4) || showAllForInvested" class="portfolio">
                            <div class="portfolio-icon" [ngClass]="setBorderClass(portfolio)"><img [src]="getImg(portfolio?.riskProfileId, portfolio?.portfolioCategory)" /></div>
                            <div class="portfolio-details">
                                <div class="portfolio-name">
                                    <span class="portfolio-lbl flex-col-11">{{portfolio?.portfolioName}}</span>
                                    <span *ngIf="portfolio?.fundingTypeValue == 'SRS'" class="portfolio-fund-type">
                                  {{'YOUR_INVESTMENT.SRS' | translate}}
                                </span>
                                </div>
                                <div class="ref-code">{{'YOUR_INVESTMENT.REF_LABEL' | translate}} {{portfolio?.refNo}}</div>
                                <div class="ja-logo" *ngIf="portfolio?.entitlements?.jointAccount"><span class="ja-icon"><img src="assets/images/investment-account/ja-icon.svg" /></span><span>{{'YOUR_INVESTMENT.JOINT_ACCOUNT' | translate}}</span></div>
                                <div class="portfolio-value">
                                    <span *ngIf="!portfolio?.portfolioValue">$0</span>
                                    <span *ngIf="portfolio?.portfolioValue">{{portfolio?.portfolioValue | formatCurrency}}</span>
                                    <span class="buy-request cursorPointer" *ngIf="portfolio?.buyRequestCount" (click)="gotoBuyRequest()">{{portfolio?.buyRequestCount}}
                                    <span *ngIf="portfolio?.buyRequestCount == 1"> {{'YOUR_INVESTMENT.BUY_REQUEST' | translate}}</span>
                                    <span *ngIf="portfolio?.buyRequestCount > 1"> {{'YOUR_INVESTMENT.BUY_REQUESTS' | translate}}</span>
                                    </span>
                                </div>
                                <div class="portfolio-btn">
                                    <span *ngIf="!portfolio?.simpleReturns && showTotalReturn" class="total-returns">0%</span>
                                    <span *ngIf="portfolio?.simpleReturns && showTotalReturn" [class.negativeValue]="portfolio?.simpleReturns < 0" class="total-returns">{{formatReturns(portfolio?.simpleReturns)}}{{portfolio?.simpleReturns | number : '1.0-2'}}%</span>
                                    <span *ngIf="!portfolio?.cashAccountBalance && portfolio?.fundingTypeValue !== 'SRS'" class="cash-account-value">{{'YOUR_INVESTMENT.CA_LABEL' | translate}} $0</span>
                                    <span *ngIf="portfolio?.cashAccountBalance && portfolio?.fundingTypeValue !== 'SRS'" class="cash-account-value">{{'YOUR_INVESTMENT.CA_LABEL' | translate}} {{portfolio?.cashAccountBalance | formatCurrency}}</span>
                                </div>
                                <div *ngIf="portfolio?.portfolioStatus === 'REBALANCING'" (click)="showRebalanceMessage()" class="reblancing-lbl mt10 flex">
                                    <span class="rebalance-logo"><img src="assets/images/investment-account/rebalancing.svg" alt="" /></span>
                                    <span>{{'YOUR_INVESTMENT.REBALANCE' | translate}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="list-btn" *ngIf="filteredInvestedList.length > 5">
                        <span *ngIf="!showAllForInvested" (click)="showHideToggle('showAllForInvested')">{{'YOUR_INVESTMENT.LIST_ALL' | translate}} ({{ filteredInvestedList.length - 5}})<img src="assets/images/investment-account/list-down.svg" /></span>
                        <span *ngIf="showAllForInvested" (click)="showHideToggle('showAllForInvested')">{{'YOUR_INVESTMENT.SHOW_LESS' | translate}}<img class="show-less" src="assets/images/investment-account/list-down.svg" /></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<ng-template #noFilteredPortfolios>
    <div class="container-fluid max-width--1024 no-portfolio-container">
        <div class="form-group-with-bg no-portfolio">
            <div class="flex-col align-center">
                <div class="msg"> {{'YOUR_INVESTMENT.NO_PORTFOLIOS_YET' | translate}} <br> {{'YOUR_INVESTMENT.ADD_PORTFOLIO_START_INVEST' | translate}} </div>
                <div class="add-portfolio-icon"><img src="assets/images/add-portfolio-icon.svg" alt="" /></div>
                <button type="button" class="btn btn-primary" id="add_portfolio" (click)="addPortfolio()">
                    {{'YOUR_INVESTMENT.ADD_PORTFOLIO' | translate}} </button>
            </div>
        </div>
    </div>
</ng-template>
<!-- / Widget Content-->