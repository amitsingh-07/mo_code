<div class="transaction-panel pr0 pl0">
  <div class="container-fluid pl0 pr0">
    <div class="content">
      <ngb-tabset>
        <ngb-tab title="History">
          <ng-template ngbTabContent>
            <div class="flex-row" *ngIf="transactionHistory">
              <div class="flex-col-12">
                <div class="transaction-panel__history white-bg">
                  <div *ngFor="let group of transactionHistory; let i = index" class="transaction-group">
                    <div class="transaction-panel__history--date">{{group.groupName}}</div>

                    <div class="transaction-panel__history--details">
                      <div *ngFor="let transaction of group.value; let j = index">
                        <div class="flex-row transaction-panel__history--details--title" (click)="expandCollapseAccordion(i, j)">
                          <div class="flex-col-8"><span [class.buy]="transaction.transactionType.name.toUpperCase() === 'BUY'" class="transaction-panel__history--details--title--sale" *ngIf="transaction.transactionType"
                              >{{transaction.transactionType.name}}</span><span
                              *ngIf="transaction.portfolio">{{transaction.portfolio.name}}</span></div>
                          <div class="flex-col-4 text-right"><span [class.buy]="transaction.transactionType.name.toUpperCase() === 'BUY'" class="transaction-panel__history--details--title--amount--sale"><span *ngIf="transaction.transactionType.name.toUpperCase() !== 'BUY'">-</span> {{transaction.amount | currency}}</span>
                            <i *ngIf="transaction.fundInvestmentSplits && transaction.fundInvestmentSplits.length" class='fa right mt5' [class.fa-chevron-down]="activeTransactionIndex !== i.toString() + j.toString()" [class.fa-chevron-up]="activeTransactionIndex === i.toString() + j.toString()"></i>
                          </div>
                        </div>

                        <div *ngFor="let fund of transaction.fundInvestmentSplits">
                          <div *ngIf="fund.fund" class="flex-row transaction-panel__history--details--desc" [class.show]="activeTransactionIndex === i.toString() + j.toString()"
                            >
                            <div class="flex-col-8">{{fund.fund.name}}</div>
                            <div class="flex-col-4 text-right">{{fund.unitPrice | currency }}</div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="no-transaction" *ngIf="!transactionHistory || !transactionHistory.length">
              <div class="no-content">
              <img src="../../../assets/images/investment-account/light_owl.svg" />
              <div class="mt15">No Transaction History!</div>
            </div>
            </div>

          </ng-template>
        </ngb-tab>
        <ngb-tab class="btn width100" title="Statements">
          <ng-template ngbTabContent>
            <div class="flex-row">
              <div class="flex-col-12">
                <div class="transaction-panel__statements white-bg">
                  <div *ngIf="statementMonthsList">
                    <div *ngFor="let statementMonth of statementMonthsList">
                      <div class="transaction-panel__statements--date">{{statementMonth.year}}</div>
                      <div class="flex-row transaction-panel__statements--details" *ngFor="let month of statementMonth.months">
                        <div class="flex-col-6">{{month.monthName}}</div>
                        <div class="flex-col-6 text-right"><a class="download-link" target="_blank" download [href]="getStatementLink(month)">Download</a></div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="no-transaction" *ngIf="!statementMonthsList || !statementMonthsList.length">
                    <div class="no-content">
                    <img src="../../../assets/images/investment-account/light_owl.svg" />
                    <div class="mt15">No Transaction Statements!</div>
                  </div>
                </div>

              </div>
            </div>
          </ng-template>
        </ngb-tab>
      </ngb-tabset>
    </div>
  </div>
</div>
